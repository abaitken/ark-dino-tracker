<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>ARK Dino Tracker</title>
  <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="icon" type="image/x-icon" href="img/favicon.ico">
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <img src="img/Tex_skill_58.PNG" width="32" height="32" />&nbsp;
      <a class="navbar-brand" href="#">ARK Dino Tracker</a>
      <!-- ko if: dataReady -->
      <div>
        <select
          data-bind="options: maps, optionsText: 'Text', value: selectedMap"></select>
        <select
          data-bind="options: datasets, optionsText: 'Text', value: selectedDataset"></select>
        <select
          data-bind="options: creatureClasses, optionsText: 'Text', value: selectedCreatureClass, optionsCaption: 'Select creature class...'"></select>
        <span class="navbar-text">
          Show tooltips: <input type="checkbox" data-bind="checked: showTooltips" />
          <button class="btn btn-dark" onclick="vm.RefreshData()">
               <img src="img/refresh.png" /> Refresh
          </button>
        </span>
      </div>
      <!-- /ko -->
    </nav>
  </header>

  <main role="main">
    <div class="container">
      <!-- ko ifnot: dataReady -->
      <div class="row">
        <div class="col-lg-12">
          <div data-bind="text: messages" class="alert alert-info" role="alert" id="messages">Fetching...</div>
        </div>
      </div>
      <!-- /ko -->
      <!-- ko if: dataReady -->
      <div class="row no-gutters">
        <div class="col col-xl-8">
          <div class="map">
            <img data-bind="attr: { src: selectedMap().Image }" class="mapImage" id="mapImage" data-bind="coordtooltip: true"/>
            <!-- ko foreach: locations -->
            <div class="location" data-bind="position: $data, levelIndicator: Level"></div>
            <!-- /ko -->
            <span class="coordinateTooltip"></span>
          </div>
        </div>
        <div class="col col-xl-3">
          <span class="text-muted">
            <div>Last updated: <span data-bind="text: lastUpdated"></span></div>
          </span>
          <div><h3><span data-bind="text: selectedCreatureClassName"></span> (x<span data-bind="text: creatureNumber"></span>)</h3></div>
          <h4>Top 25:</h4>
          <table class="table table-sm">
            <thead>
              <tr>
                <th scope="col">&nbsp;</th>
                <th scope="col">Lat</th>
                <th scope="col">Lon</th>
              </tr>
            </thead>
            <tbody>
              <!-- ko foreach: topLocations -->
              <tr>
                <td>
                  <div class="locationLarge" data-bind="levelIndicator: Level"></div>
                </td>
                <td data-bind="text: Lat"></td>
                <td data-bind="text: Lon"></td>
              </tr>
              <!-- /ko -->
            </tbody>
          </table>
        </div>
        <div class="col col-xl-1">
          <span>Legend:</span>
          <table class="table table-sm">
            <tbody>
              <!-- ko foreach: colorLegend -->
              <tr>
                <td>
                  <div class="locationLarge" data-bind="levelIndicator: min"></div>
                </td>
                <td>
                  <div><span data-bind="text: min"></span> - <span data-bind="text: max"></span></div>
                </td>
              </tr>
              <!-- /ko -->
            </tbody>
          </table>
        </div>
      </div>
      <!-- /ko -->
    </div>
  </main>

  <script src="lib/jquery/jquery.min.js" type="text/javascript"></script>
  <script src="lib/knockout/knockout-latest.min.js" type="text/javascript"></script>
  <script src="lib/bootstrap/js/bootstrap.bundle.min.js" type="text/javascript"></script>
  <script src="js/viewmodel.js" type="text/javascript"></script>
</body>

</html>